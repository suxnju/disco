{
	"Language": "Solidity",
	"Source": "pragma solidity ^0.4.24;\r\n\r\n// Author: Bruno Block\r\n// Version: 0.5\r\n\r\ninterface contractInterface {\r\n    function balanceOf(address _owner) external constant returns (uint256 balance);\r\n    function transfer(address _to, uint256 _value) external;\r\n}\r\n\r\ncontract DualSig {\r\n    address public directorA;\r\n    address public directorB;\r\n    address public proposalAuthor;\r\n    address public proposalContract;\r\n    address public proposalDestination;\r\n    uint256 public proposalAmount;\r\n    uint256 public proposalBlock;\r\n    uint256 public proposalNonce;\r\n    uint256 public overrideBlock;\r\n    uint256 public transferSafety;\r\n\r\n    event Proposal(uint256 _nonce, address _author, address _contract, uint256 _amount, address _destination, uint256 _timestamp);\r\n\r\n    event Accept(uint256 _nonce);\r\n\r\n    event NewDirectorA(address _director);\r\n\r\n    event NewDirectorB(address _director);\r\n\r\n    modifier onlyDirectors {\r\n        require(msg.sender == directorA || msg.sender == directorB);\r\n        _;\r\n    }\r\n\r\n    constructor() public {\r\n        overrideBlock = (60*60*24*30)/15;// One month override interval assuming 15 second blocks (172,800 blocks)\r\n        proposalNonce = 0;\r\n        transferSafety = 1 ether;\r\n        directorA = msg.sender;\r\n        directorB = msg.sender;\r\n        reset();\r\n    }\r\n\r\n    function () public payable {}\r\n\r\n    function proposal(address proposalContractSet, uint256 proposalAmountSet, address proposalDestinationSet) public onlyDirectors {\r\n        proposalNonce++;\r\n        proposalAuthor = msg.sender;\r\n        proposalContract = proposalContractSet;\r\n        proposalAmount = proposalAmountSet;\r\n        proposalDestination = proposalDestinationSet;\r\n        proposalBlock = block.number + overrideBlock;\r\n        emit Proposal(proposalNonce, proposalAuthor, proposalContract, proposalAmount, proposalDestination, proposalBlock);\r\n    }\r\n\r\n    function reset() public onlyDirectors {\r\n        proposalNonce++;\r\n        if (proposalNonce > 1000000) {\r\n            proposalNonce = 0;\r\n        }\r\n        proposalAuthor = 0x0;\r\n        proposalContract = 0x0;\r\n        proposalAmount = 0;\r\n        proposalDestination = 0x0;\r\n        proposalBlock = 0;\r\n    }\r\n\r\n    function accept(uint256 acceptNonce) public onlyDirectors {\r\n        require(proposalNonce == acceptNonce);\r\n        require(proposalAmount > 0);\r\n        require(proposalDestination != 0x0);\r\n        require(proposalAuthor != msg.sender || block.number >= proposalBlock);\r\n\r\n        address localContract = proposalContract;\r\n        address localDestination = proposalDestination;\r\n        uint256 localAmount = proposalAmount;\r\n        reset();\r\n\r\n        if (localContract==0x0) {\r\n            require(localAmount <= address(this).balance);\r\n            localDestination.transfer(localAmount);\r\n        }\r\n        else {\r\n            contractInterface tokenContract = contractInterface(localContract);\r\n            tokenContract.transfer(localDestination, localAmount);\r\n        }\r\n        emit Accept(acceptNonce);\r\n    }\r\n\r\n    function transferDirectorA(address newDirectorA) public payable {\r\n        require(msg.sender==directorA);\r\n        require(msg.value==transferSafety);// Prevents accidental transfer\r\n        directorA.transfer(transferSafety);// Reimburse safety deposit\r\n        reset();\r\n        directorA = newDirectorA;\r\n        emit NewDirectorA(directorA);\r\n    }\r\n\r\n    function transferDirectorB(address newDirectorB) public payable {\r\n        require(msg.sender==directorB);\r\n        require(msg.value==transferSafety);// Prevents accidental transfer\r\n        directorB.transfer(transferSafety);// Reimburse safety deposit\r\n        reset();\r\n        directorB = newDirectorB;\r\n        emit NewDirectorB(directorB);\r\n    }\r\n}",
	"ContractName": "DualSig",
	"CompilerVersion": "v0.4.24+commit.e67f0147"
}